<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduFocus - App Educativa</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <div class="logo-icon">ğŸ“</div>
                <div class="logo-text">
                    <h1>EduFocus</h1>
                    <p>Tu asistente de aprendizaje inteligente</p>
                </div>
            </div>
            <div class="header-actions">
                <button class="theme-toggle" id="themeToggle" title="Cambiar tema">
                    <span class="theme-icon sun">â˜€ï¸</span>
                    <span class="theme-icon moon">ğŸŒ™</span>
                </button>
                <div id="userInfo" class="user-info hidden">
                    <div class="user-badge badge-streak">ğŸ”¥ <span id="streakDisplay">0</span></div>
                    <div class="user-badge badge-xp">â­ <span id="xpDisplay">0</span></div>
                    <div class="user-badge badge-level">ğŸ“Š <span id="levelDisplay">Nivel 1</span></div>
                    <span class="user-name" id="userNameDisplay"></span>
                    <button class="logout-btn" id="logoutBtn" title="Cerrar sesiÃ³n">ğŸšª</button>
                </div>
            </div>
        </header>

        <!-- Auth Section -->
        <section id="authSection" class="auth-section">
            <div class="auth-grid">
                <div class="auth-card register">
                    <h3 style="color: #6366f1;">ğŸ“ Crear Cuenta</h3>
                    <form id="registerForm">
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="regEmail" placeholder="tu@email.com" required>
                        </div>
                        <div class="form-group">
                            <label>ContraseÃ±a (mÃ­nimo 6 caracteres)</label>
                            <input type="password" id="regPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢" required>
                        </div>
                        <div class="form-group">
                            <label>Fecha de nacimiento</label>
                            <input type="date" id="regBirthDate" required>
                        </div>
                        <div class="form-group">
                            <label>Tipo de cuenta</label>
                            <select id="regRole">
                                <option value="STUDENT">ğŸ’ Estudiante</option>
                                <option value="PARENT">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Padre/Madre</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary" style="width: 100%;">Crear Cuenta</button>
                    </form>
                </div>
                <div class="auth-card login">
                    <h3 style="color: #10b981;">ğŸ”‘ Iniciar SesiÃ³n</h3>
                    <form id="loginForm">
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="loginEmail" placeholder="tu@email.com" required>
                        </div>
                        <div class="form-group">
                            <label>ContraseÃ±a</label>
                            <input type="password" id="loginPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢" required>
                        </div>
                        <button type="submit" class="btn btn-secondary" style="width: 100%;">Entrar</button>
                    </form>
                    <div class="seed-section">
                        <button class="seed-btn" id="demoBtn">ğŸ¯ Usar cuenta demo</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Dashboard -->
        <div id="dashboard" class="hidden">
            
            <!-- Today's Plan Section -->
            <section class="card" id="todayPlanSection">
                <div class="card-header">
                    <h2 class="card-title">ğŸ“… Mi Plan de Hoy</h2>
                    <span class="tasks-badge" id="planBadge">0</span>
                </div>
                <div id="todayPlanList" class="tasks-list">
                    <div class="empty-state">
                        <div class="empty-state-icon">ğŸ“…</div>
                        <p>Agrega tareas a tu plan de hoy</p>
                        <p style="font-size: 12px; margin-top: 8px;">Selecciona tareas de "Mis Tareas" o pide ayuda al Tutor</p>
                    </div>
                </div>
                <div class="plan-actions" style="margin-top: 16px; display: flex; gap: 12px;">
                    <button class="btn btn-primary" id="startPlanBtn" style="flex: 1;">ğŸš€ Iniciar mi plan</button>
                    <button class="btn btn-secondary" id="clearPlanBtn" style="flex: 1;">ğŸ—‘ï¸ Limpiar plan</button>
                </div>
            </section>

            <!-- Stats -->
            <section class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon level">ğŸ†</div>
                    <div>
                        <div class="stat-value level" id="level">1</div>
                        <div class="stat-label">Nivel</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon xp">â­</div>
                    <div>
                        <div class="stat-value xp" id="xp">0</div>
                        <div class="stat-label">XP Total</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon streak">ğŸ”¥</div>
                    <div>
                        <div class="stat-value streak" id="streak">0</div>
                        <div class="stat-label">DÃ­as Racha</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon tasks">ğŸ“‹</div>
                    <div>
                        <div class="stat-value tasks" id="tasksCount">0</div>
                        <div class="stat-label">Tareas</div>
                    </div>
                </div>
            </section>

            <!-- Main Grid -->
            <div class="main-grid">
                <!-- Tutor IA -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">ğŸ¤– Tutor Inteligente</h2>
                    </div>
                    <div id="tutorChat" class="chat-box">
                        <div class="empty-state">
                            <div class="empty-state-icon">ğŸ’¡</div>
                            <p>PregÃºntame sobre cualquier tema:<br>MatemÃ¡ticas, Historia, Ciencias...</p>
                            <p style="font-size: 12px; margin-top: 8px;">âœ¨ Â¡Puedo crearte un plan de estudio personalizado!</p>
                        </div>
                    </div>
                    <div class="input-group">
                        <input type="text" id="tutorInput" placeholder="Escribe tu pregunta o pide un plan de estudio...">
                        <button class="btn btn-primary" id="tutorSendBtn">Enviar</button>
                    </div>
                </div>

                <!-- Tasks -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">ğŸ“‹ Mis Tareas</h2>
                        <span class="tasks-badge" id="tasksBadge">0</span>
                    </div>
                    <div class="task-form">
                        <input type="text" id="taskTitle" placeholder="Nueva tarea...">
                        <select id="taskSubject">
                            <option value="MatemÃ¡tica">ğŸ“</option>
                            <option value="Lengua">ğŸ“</option>
                            <option value="Historia">ğŸ“œ</option>
                            <option value="GeografÃ­a">ğŸ—ºï¸</option>
                            <option value="Ciencias">ğŸ”¬</option>
                            <option value="FÃ­sica">âš¡</option>
                            <option value="QuÃ­mica">ğŸ§ª</option>
                        </select>
                        <button class="btn btn-secondary btn-small" id="createTaskBtn">+</button>
                    </div>
                    <div style="margin-bottom: 12px; display: flex; gap: 8px; flex-wrap: wrap;">
                        <button class="filter-btn active" data-filter="all">Todas</button>
                        <button class="filter-btn" data-filter="Pendiente">Pendientes</button>
                        <button class="filter-btn" data-filter="Completada">Completadas</button>
                    </div>
                    <div id="tasksList"></div>
                    <div class="seed-section">
                        <button class="seed-btn" id="seedBtn">ğŸŒ± Agregar 100 tareas educativas</button>
                    </div>
                </div>

                <!-- Focus Mode -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">ğŸ… Focus Mode</h2>
                    </div>
                    <div class="pomodoro-display" id="pomodoroDisplay">25:00</div>
                    <div class="pomodoro-controls">
                        <button class="pomodoro-btn start" id="focusStartBtn">â–¶ Iniciar</button>
                        <button class="pomodoro-btn pause" id="focusPauseBtn">â¸ Pausar</button>
                        <button class="pomodoro-btn stop" id="focusStopBtn">â¹ Detener</button>
                    </div>
                    <p class="pomodoro-info">25 min de enfoque + 5 min de descanso</p>
                </div>

                <!-- Status -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">ğŸ”Œ Estado del Sistema</h2>
                    </div>
                    <div class="status-item">
                        <span>ğŸŒ API EduFocus</span>
                        <span id="apiHealth"><span class="status-dot green"></span> Verificando...</span>
                    </div>
                    <div class="status-item">
                        <span>ğŸ—„ï¸ Base de Datos</span>
                        <span id="apiDb"><span class="status-dot green"></span> Verificando...</span>
                    </div>
                    <div class="status-item">
                        <span>ğŸ“ Tutor IA</span>
                        <span id="tutorStatus"><span class="status-dot yellow"></span> Modo bÃ¡sico</span>
                    </div>
                    <p style="text-align: center; margin-top: 16px; font-size: 12px; color: var(--text-muted-light);">
                        API: <span id="apiUrl"></span>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast">
        <span id="toastIcon"></span>
        <span id="toastMessage"></span>
    </div>

    <script src="/app.js"></script>
</body>
</html>
